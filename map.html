<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Registration</title>





    <script src="https://polyfill.io/v3/polyfill.js?features=default"></script>



    <link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.css" rel="stylesheet" type='text/css'>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&family=Roboto:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">


    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">


</head>

<script src="https://cdnjs.cloudflare.com/ajax/libs/geocomplete/1.7.0/jquery.geocomplete.min.js" integrity="sha512-4bp4fE4hv0i/1jLM7d+gXDaCAhnXXfGBKdHrBcpGBgnz7OlFMjUgVH4kwB85YdumZrZyryaTLnqGKlbmBatCpQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
    // var map;
    // function initMap() {
    //     map = new google.maps.Map(document.getElementById('map'), {
    //         center: { lat: -34.397, lng: 150.644 },
    //         zoom: 6,
    //     });
    // }
</script>



<script>
    // Note: This example requires that you consent to location sharing when
    // prompted by your browser. If you see the error "The Geolocation service
    // failed.", it means you probably did not give permission for the browser to
    // locate you.
    let map, infoWindow;

    function initMap() {
        map = new google.maps.Map(document.getElementById("map"), {
            center: {
                lat: -34.397,
                lng: 150.644
            },
            zoom: 6,
        });
        infoWindow = new google.maps.InfoWindow();

        // const locationButton = document.createElement("button");
        const locationButton = document.getElementById("btn");

        locationButton.textContent = "Pan to Current Location";
        locationButton.classList.add("custom-map-control-button");
        map.controls[google.maps.ControlPosition.TOP_CENTER].push(locationButton);
        locationButton.addEventListener("click", () => {
            // Try HTML5 geolocation.
            // console.log('clicked');
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(

                    (position) => {
                        const pos = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude,
                        };

                        // alert(position);
                        console.log(position);
                        console.log(position.coords.latitude);
                        console.log(position.coords.longitude);


                        alert(position);
                        alert(position.coords.latitude);
                        alert(position.coords.longitude);

                        document.getElementById('pos').value = position
                        document.getElementById('lat').value = position.coords.latitude
                        document.getElementById('lng').value = position.coords.longitude
                        document.getElementById('pos').innerHTML = position
                        document.getElementById('lat').innerHTML = position.coords.latitude
                        document.getElementById('lng').innerHTML = position.coords.longitude
                            // var locAPI = "http://maps.googleapis.com/maps/geocode/json?latlng="+position.coords.latitude+","+
                            // position.coords.longitude+"$sensor=true";

                        // // THIS IS WORKING BUT COORDINATES ARE NOT COORECT
                        // var locAPI1 = "https://maps.googleapis.com/maps/api/geocode/json?latlng="+position.coords.latitude+","+
                        // position.coords.longitude+"&key=AIzaSyCbFOBJYJrSGajJcEs9qkLS_woaNxpY8R0";
                        // console.log(locAPI1);





                        infoWindow.setPosition(pos);
                        infoWindow.setContent("Location found.");
                        infoWindow.open(map);
                        map.setCenter(pos);
                    },
                    () => {
                        handleLocationError(true, infoWindow, map.getCenter());
                    }
                );
            } else {
                // Browser doesn't support Geolocation
                handleLocationError(false, infoWindow, map.getCenter());
            }
        });
    }

    function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(
            browserHasGeolocation ?
            "Error: The Geolocation service failed." :
            "Error: Your browser doesn't support geolocation."
        );
        infoWindow.open(map);
    }

    window.initMap = initMap;
</script>


















<body class="h-100">


    <div id="map">

    </div>


    <div>

        <button id="btn"> GET CURRENT LOCATION </button>

    </div>

    <div>
        <p id="pos"> </p>
        <p id="lat"> </p>
        <p id="lng"> </p>
    </div>





    <script>
        // $('#btn').click(function(){
        //     if(navigator.geolocation)
        //         navigator.geolocation.getCurrentPosition(function(position){
        //             // console.log(position);

        //             var lat = position.coords.latitude;
        //             var lng = position.coords.longitude;

        //             console.log(position)
        //             console.log(lat)
        //             console.log(lng)

        //         });
        //     else
        //         console.log("Geolocation not supported");

        // alert(navigator.geolocation.getCurrentPosition(getCoor, errorCoor, {maximumAge:60000, timeout:5000, enableHighAccuracy:true}));

        // if (navigator.geolocation) {
        //     var location_timeout = setTimeout("geolocFail()", 10000);

        //     navigator.geolocation.getCurrentPosition(function(position) {
        //         clearTimeout(location_timeout);

        //         var lat = position.coords.latitude;
        //         var lng = position.coords.longitude;

        //         geocodeLatLng(lat, lng);

        //         console.log(lat)
        //         console.log(long)
        //         // console.log()
        //     }, function(error) {
        //         clearTimeout(location_timeout);
        //         geolocFail();
        //     });
        // } else {
        //     // Fallback for no geolocation
        //     geolocFail();
        // }
        // })
    </script>



    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCbFOBJYJrSGajJcEs9qkLS_woaNxpY8R0&callback=initMap">
    </script>


    <!--**********************************
	Scripts
***********************************-->
    <!-- Required vendors -->


</body>

</html>